# V8引擎是如何执行一段代码的

![](../.gitbook/assets/1_cgtv-fgvhusnkssybt84qg.png)

### **什么是V8？**

**V8是Google用C++编写的高性能的JS引擎，这意味着V8是一个C++程序，接收JS代码进行编译执行。**

了解 **V8 引擎**的执行机制，可以帮助我们深入理解JS并且对JS语言有更加充分的认识。

众所周知，程序是通过处理器来运行的。但是处理器不能识别我们所写的代码，只能识别**机器码**，因此需要将代码翻译成机器能读懂的语言，此时就需要**编译器**和**解释器。**

#### 编译型语言与解释型语言

* 编译型：在程序执行之前，需要经过编译器的编译过程，并且保存编译过后的二进制文件，再次执程序时，可以直接运行二进制文件，不需要再次编译。eg：C++、Java、Go
* 解释型：程序每次运行时，需要解释器对程序进行动态解释和执行。eg：JS，Python

### V8 是如何执行一段JS代码的

![](../.gitbook/assets/v8-bian-yi-qi-guan-dao.png)

通过上图，可以看出V8在执行过程中，解释器（Ignition）和编译器（TurboFan）都有参与。在生成 Bytecode 时，会经过一系列的内联优化阶段，提高性能。

由于JS解释器/编译器类似HTML解析器,，需要将js转化成AST后，才能进行解析。通常生成抽象语法树需要两个步骤：词法分析、语法分析。

**第一阶段-词法分析**：将一个个字符串识别出一个个单词就是Token。而且词法分析器是一边读取一边识别，可以通过正则文法和有限自动机打造词法分析器。

![](../.gitbook/assets/you-xian-zi-dong-ji.jpg)

如上图所示，描述出标志符、比较操作符、数字字面量这三种Token的词法规则，根据这样的规则来构造有限自动机。

